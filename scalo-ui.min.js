var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var DownloadUI={show:function(){$("#main :input").attr("disabled",!0);Engine.playing&&ViewEngine.pause();Engine.hasMultiple()?($("#rangeInput :input").attr("disabled",!1),$('input[value="gif"]').attr("disabled",!1),$("#gifInput :input").attr("disabled",!1)):($("#rangeInput :input").attr("disabled",!0),$('input[value="gif"]').attr("disabled",!0),$("#gifInput :input").attr("disabled",!0));this.setActiveGroup();$("#main").css("opacity","0.5");$("#export").show()},hide:function(){$("#export").hide();
$("#main").css("opacity","1");$("#main :input").attr("disabled",!1)},setActiveGroup:function(){switch($('input[name="fileType"]:checked').val()){case "svg":Engine.hasMultiple()?$("#svgInput :input").attr("disabled",!1):$("#singleInput :input").attr("disabled",!1);$("#gifInput :input").attr("disabled",!0);break;case "gif":$("#gifInput :input").attr("disabled",!1),$("#svgInput :input").attr("disabled",!0)}}};
$(document).ready(function(){$('input[value="svg"]').attr("checked",!0);$("#download").click(function(){DownloadUI.show()});$("#cancel").click(function(){DownloadUI.hide();ViewEngine.play()});$('input[name="fileType"]').change(function(){DownloadUI.setActiveGroup()})});
var ImageSerializer={urls:[],counter:0,svg:document.getElementById("draw"),toSVG:function(){var a=document.getElementById("draw");a=(new XMLSerializer).serializeToString(a);a=new Blob([a],{type:"image/svg+xml;charset=utf-8"});this.downloadBlob("graphic.svg",a)},toGIF:function(){clearInterval(Engine.ref);this.counter=0;var a=new GIF({workers:8,quality:1,width:500,height:500,repeat:0});a.setOption("debug",!0);a.on("progress",function(a){console.log(a)});a.on("finished",function(a){ImageSerializer.downloadBlob("animation.gif",
a);setInterval(ViewEngine.ref)});this.urls=[];for(var b=$jscomp.makeIterator(ViewEngine.frames),c=b.next();!c.done;c=b.next()){var d=c.value;c=document.createElementNS("http://www.w3.org/2000/svg","svg");d=$jscomp.makeIterator(d.tags);for(var e=d.next();!e.done;e=d.next())c.appendChild(e.value);c=(new XMLSerializer).serializeToString(c);c=new Blob([c],{type:"image/svg+xml;charset=utf-8"});this.urls.push(URL.createObjectURL(c))}this.loadFrames(a,0)},loadFrames:function(a,b){if(b==this.urls.length)a.render();
else{var c=new Image;c.src=this.urls[b];c.onload=function(){a.addFrame(c,{delay:1E3/60,copy:!1});URL.revokeObjectURL(c.src);ImageSerializer.loadFrames(a,++b)}}},downloadBlob:function(a,b){var c=document.createElement("a");c.download=a;c.href=URL.createObjectURL(b);document.body.appendChild(c);c.click();setTimeout(function(){URL.revokeObjectURL(c.href);document.body.removeChild(c)})}},Console={console:$("#console"),error:function(a,b){this.console.text(this.console.text+"["+b+"] "+a+"\n")},clear:function(){this.console.text("")},
print:function(a){this.console.text(this.console.text()+"> "+a+"\n")}};$(document).ready(function(){var a=!1,b=$("#textContainer"),c=$("#viewContainer");$("#dragbar").mousedown(function(d){d.preventDefault();a=!0;$(document).mousemove(function(a){a=a.pageX/window.innerWidth*100;b.css("width",a+"%");c.css("width",100-a+"%")})});$(document).mouseup(function(){a&&($(document).unbind("mousemove"),a=!1)})});$(document).ready=function(){$("#slider").mouseup(function(){ViewEngine.pause()})};
$(document).ready(function(){var a=1;$("#code").on("input",function(){for(numLinesCode=$("#code").val().split(/\n/).length;a>numLinesCode;)$("#lineNums :last-child").remove(),--a;for(;a<numLinesCode;)++a,$("#lineNums").append('<span class="num">'+a+"</span")});$("#code").keydown(function(b){switch(b.keyCode||b.which){case 13:++a;$("#lineNums").append('<span class="num">'+a+"</span");console.log($("#lineNums :last-child").text());console.log();break;case 9:b.preventDefault();b=$("#code").prop("selectionStart");
var c=$("#code").prop("selectionEnd"),d=$("#code").val();$("#code").val(d.substring(0,b)+"\t"+d.substring(c));$("#code").prop("selectionStart",++b);$("#code").prop("selectionEnd",++c)}});$("#code").scroll(function(){var a=$("#code").scrollTop();$("#lineNums").scrollTop(a)})});
var ViewEngine={frames:[],frameIndex:0,ref:void 0,playing:!1,viewbox:void 0,width:500,height:500,magnif:1,originX:void 0,originY:void 0,init:function(a){this.erase();this.frames=a;frameIndex=0;switch(this.frames.length){case 1:$("#draw").append(this.frames[0]);$("#playWrapper").css("visibility","visible");break;default:this.play(0),$("#playWrapper").css("visibility","visible")}},pause:function(){clearInterval(this.ref);this.playing=!1;$("#playPause").children().attr("src","img/play.svg")},play:function(a){this.frameIndex=
a;this.ref=setInterval(function(){ViewEngine.erase();$("#draw").append(ViewEngine.frames[ViewEngine.frameIndex]);ViewEngine.frameIndex=++ViewEngine.frameIndex%ViewEngine.frames.length;var a=ViewEngine.frameIndex/(ViewEngine.frames.length-1)*100;$("#scrub").val(a)},1E3/30);this.playing=!0;$("#playPause").children().attr("src","img/pause.svg")},skip:function(a){this.playing&&this.pause();a=this.frameIndex+a;this.frameIndex=0<=a?a%this.frames.length:this.frames.length-Math.abs(a%this.frames.length);
this.erase();$("#draw").append(this.frames[this.frameIndex].eval())},scrubTo:function(a){this.frameIndex=Math.round(a*(this.frames.length-1));this.erase();$("#draw").append(this.frames[this.frameIndex].eval())},erase:function(){document.getElementById("draw").innerHTML=""},setZoom:function(a){0<a&&3>this.magnif?this.magnif+=.25:0>a&&.25<this.magnif?this.magnif-=.25:0==a&&(this.magnif=1);$("#percent").text(100*this.magnif+"%");a=this.magnif*this.width;var b=this.magnif*this.height;$("#draw").attr("width",
a);$("#draw").attr("height",b)},setSize:function(a,b){this.width=a;this.height=b;$("#draw").attr("width",this.magnif*this.width);$("#draw").attr("height",this.magnif*this.height)},updateViewBox:function(){this.originX=parseInt($("#originX").val());this.originY=parseInt($("#originY").val());this.width=parseInt($("#canvasX").val());this.height=parseInt($("#canvasY").val());this.viewbox=this.originX+" "+this.originY+" "+this.width+" "+this.height;$("#draw").attr("viewBox",this.viewbox);$("#draw").attr("width",
this.magnif*this.width);$("#draw").attr("height",this.magnif*this.height)}},hovering=!1,navOpen=!1,checked=!1;
$(document).ready(function(){$("#test").click(function(){$("#all").css("opacity","0.3")});$("#playPause").click(function(){0!=ViewEngine.frames.length&&(ViewEngine.playing?ViewEngine.pause():ViewEngine.play(ViewEngine.frameIndex))});$("#sliderCheck").change(function(){(checked=!checked)?($("#sliderWrapper").css("width","10em"),$("#scrub").show()):($("#sliderWrapper").css("width","0"),$("#scrub").hide())});$("#forward").click(function(){ViewEngine.skip(1)});$("#backward").click(function(){ViewEngine.skip(-1)});
$("#scrub").mousedown(function(){ViewEngine.playing&&ViewEngine.pause()});$("#scrub").on("input",function(){ViewEngine.scrubTo($("#scrub").val()/100)});$("#draw").mouseenter(function(){hovering=!0;$("#coords").text("0,0")});$("#draw").mouseleave(function(){hovering=!1;$("#coords").text("0,0")});$("#draw").mousemove(function(a){if(hovering){var b=$(this).parent().offset(),c=parseInt($("#buttonBar").offset().top),d=a.pageX-b.left;a=a.pageY-b.top-c;$("#coords").text(parseInt(d)+","+parseInt(a))}});$("#execute").click(function(){Console.clear();
clearInterval(ViewEngine.ref);try{frames=Interpreter.run($("#code").val())}catch(a){a instanceof Error&&Console.error(a.message,a.line)}void 0!=frames&&1<=frames.length&&ViewEngine.init(frames)});$("#settings").click(function(){navOpen?$("#sidenav").css("width","0px"):$("#sidenav").css("width","250px");navOpen=!navOpen});$("#svgContainer").click(function(){navOpen&&($("#sidenav").css("width","0px"),navOpen=!navOpen)});$("#originX, #originY, #canvasX, #canvasY").change(function(){ViewEngine.updateViewBox()});
$("#magnify").click(function(){ViewEngine.setZoom(1)});$("#reset").click(function(){ViewEngine.setZoom(0)});$("#minify").click(function(){ViewEngine.setZoom(-1)})});